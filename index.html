<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8"/>
        <title>TIC-TAC-TOE</title>
        <link rel="shortcut icon" type="imagex/png" href="x.ico">

        <style>
        body {
            align-items: center;
            flex-direction: column;
            display:flex;
        }

        #game {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            background: #87555c;
            border-radius: 5px;
        }

        .buttonGame{
            background-color: #f1e9bb;
            margin: 10px;
            border: 0px;
            height: 100px;
            width: 100px;
            color: black;
            border-radius: 10px;
            font-size: 40px;
        }

        button {
        padding: 7px;
        border-radius: 4px;
        cursor: pointer;
        }

        </style>
    </head>
    <body>
        <h3>JOGO DA VELHA</h3>
        
        <label>
            <h3>Vez do jogador >> X</h3>
        </label>
        
        <div id="game"></div>

        <script>
            let jogadas = [
                '','','',
                '','','',
                '','','',
        ];

        //-------------DECLARAÇÕES DE VARIAVEIS-------------------------------------
            let vez = 'X';
            const game = document.querySelector('#game');
            let label = document.querySelector("label");
            let gameover = false;
            let turnos = 0;

        //-------------DECLARAÇÕES DA FUNCAO QUANDO O JOGADOR CLICAR EM UMA CELULA------
            function clickDoJogador(index) {    

            if(gameover==false) {

                if(jogadas[index]=='') {
                
                    if(vez == 'X') {
                    jogadas[index] = 'X';
                    desenhaBotoes();
                    label.innerHTML = "<h3>Vez do jogador >> O</h3>";
                    verificaVencedor();
                    vez = 'O';
                }

                else {
                    jogadas[index] = 'O';
                    desenhaBotoes();
                    label.innerHTML= "<h3>Vez do jogador >> X</h3>";
                    verificaVencedor();
                    vez = 'X';
                }
            }
        }

          }
          //-------------DECLARAÇÕES DESENHA OS BOTOES NA TELA------------------------
          function desenhaBotoes(){
            
            game.innerHTML = '';
            turnos++;

            for (let i = 0; i < 9; i++) {
            game.innerHTML += `<button class="buttonGame" onclick="clickDoJogador(${i})">` + jogadas[i] + `</button>`
          }
        }
        //-------------DECLARAÇÕES DA FUNCAO QUE VERIFICA SE A CELULA ESTA VAZIA------
        function verificaCelulas(c1, c2, c3) {
            return (
                    jogadas [c1] != '' &&
                    jogadas [c2] != '' &&
                    jogadas [c3] != '' &&
                    jogadas [c1] == jogadas[c2] &&
                    jogadas [c2] == jogadas[c3]
            );
        }
        //-------------DECLARAÇÕES DA FUNCAO QUEM FOI O VENCEDOR SE AS CELULAS CONTEM O MESMO CARACTER----
        function verificaVencedor() {
           if(
            verificaCelulas(0,1,2) ||
            verificaCelulas(3,4,5) ||
            verificaCelulas(6,7,8) ||

            verificaCelulas(0,3,6) ||
            verificaCelulas(1,4,7) ||
            verificaCelulas(2,5,8) ||

            verificaCelulas(0,3,6) ||
            verificaCelulas(0,4,8) ||
            verificaCelulas(2,4,6)
           ) {
           gameover = true;
           alert('FIM DE JOGO - VENCEDOR JOGADOR >> '+vez);
           //window.location.reload(true);
           }
           else if (turnos==10) {                   //VERIFICA SE FEZ TODAS AS VERIFICAÇÕES E CHEGOU NO FIM DOS TURNOS
                    gameover=true;
                    alert('FIM DE JOGO - DEU VELHA');
            }
        }
        //-------------DECLARACAO FUNCAO PARA VERIFICAR GANHADOR USANDO APENAS IF-----------------------
        /*function verificaVencedor(){
           if((jogadas[0]&&jogadas[1]&&jogadas[2]==vez)
            ||(jogadas[3]&&jogadas[4]&&jogadas[5]==vez)
            ||(jogadas[6]&&jogadas[7]&&jogadas[8]==vez)
            ||(jogadas[0]&&jogadas[3]&&jogadas[6]==vez)
            ||(jogadas[1]&&jogadas[4]&&jogadas[7]==vez)
            ||(jogadas[2]&&jogadas[5]&&jogadas[8]==vez)
            ||(jogadas[0]&&jogadas[3]&&jogadas[6]==vez)
            ||(jogadas[0]&&jogadas[4]&&jogadas[8]==vez)
            ||(jogadas[2]&&jogadas[4]&&jogadas[6]==vez))
            
            alert("JOGADOR" +vez "GANHOU");
        }*/

            desenhaBotoes();
            verificavencedor();
        </script>

        <button id="restartButton" onclick="window.location.reload(true)">Reiniciar Jogo</button>

    </body>
</html>